CKEDITOR.dialog.add("link",function(){var f=CKEDITOR.plugins.link,c;return{title:"Create Link",minWidth:300,minHeight:32,contents:[{id:"info",label:"Link",title:"Link",elements:[{type:"text",id:"url",required:!0,onChange:function(){var a=$(this.getInputElement().$),b=a.val();/^([^:]+:|\(\([^\)]+\)\)$)/.test(b)||(b="http://"+b);a.val(b)},setup:function(a){a.url&&this.setValue(a.url)},commit:function(a){this.onChange();a.url=this.getValue()}}]}],onCancel:function(){},onShow:function(){var a=this.getParentEditor(),
b=a.getSelection(),e={url:null};(c=f.getSelectedLink(a))&&c.hasAttribute("href")?(b.selectElement(c),e.url=c.getAttribute("href")):c=null;e.url||(a=a.element.data("link-default-url"),b=$.trim(b.getSelectedText()),e.url=/^https?:\/\//.test(b)?b:a?a:"");this.parts.dialog.addClass("cke_link_dialog");this.setupContent(e)},onOk:function(){var a={},b={},e=this.getParentEditor(),d=e.getSelection();this.commitContent(a);b.href=a.url;c?(c.setAttributes(b),d.selectElement(c),delete this._.selectedElement):
(d=d.getRanges(1)[0],d.collapsed&&(a=new CKEDITOR.dom.text(a.url,e.document),d.insertNode(a),d.selectNodeContents(a)),b=new CKEDITOR.style({element:"a",attributes:b}),b.type=CKEDITOR.STYLE_INLINE,b.applyToRange(d),d.select())},onLoad:function(){},onFocus:function(){urlField=this.getContentElement("info","url");urlField.select()},resizable:CKEDITOR.DIALOG_RESIZE_NONE}});